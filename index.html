<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Men√∫ de Juegos</title>
<style>
  body { font-family: Arial, sans-serif; background: #f0f0f0; margin: 0; padding: 0; }
  #menu, #memoryGame, #mazeGame { display: none; padding: 20px; text-align: center; }
  #menu { display: block; }
  button { font-size: 18px; margin: 10px; padding: 10px 20px; cursor: pointer; }
  
  /* Estilos Memoria */
  #memoryGame {
    max-width: 600px;
    margin: 0 auto;
  }
  .memory-grid {
    display: grid;
    grid-template-columns: repeat(4, 100px);
    grid-gap: 15px;
    justify-content: center;
  }
  .card {
    width: 100px;
    height: 100px;
    background: #007bff;
    color: white;
    font-size: 40px;
    line-height: 100px;
    cursor: pointer;
    border-radius: 10px;
    user-select: none;
    position: relative;
    perspective: 600px;
  }
  .card-inner {
    position: absolute;
    width: 100px;
    height: 100px;
    transition: transform 0.5s;
    transform-style: preserve-3d;
    border-radius: 10px;
  }
  .card.flipped .card-inner {
    transform: rotateY(180deg);
  }
  .card-front, .card-back {
    position: absolute;
    width: 100px;
    height: 100px;
    backface-visibility: hidden;
    border-radius: 10px;
  }
  .card-front {
    background: #007bff;
  }
  .card-back {
    background: white;
    color: black;
    transform: rotateY(180deg);
    font-weight: bold;
    font-size: 40px;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* Estilos Laberinto */
  #mazeGame {
    position: relative;
    width: 400px;
    height: 400px;
    background: #eee;
    margin: 20px auto;
    border: 3px solid #333;
  }
  .maze-cell {
    width: 40px;
    height: 40px;
    box-sizing: border-box;
    float: left;
    border: 1px solid #ccc;
  }
  .wall {
    background: black;
  }
  .player {
    background: green;
  }
  .goal {
    background: gold;
  }

  #backToMenu {
    margin-top: 20px;
    background: darkred;
    color: white;
  }
</style>
</head>
<body>

<div id="menu">
  <h1>Bienvenido a la selecci√≥n de juegos</h1>
  <button onclick="showGame('memory')">Juego de Memoria</button>
  <button onclick="showGame('maze')">Juego del Laberinto</button>
</div>

<div id="memoryGame">
  <h2>Juego de Memoria</h2>
  <div class="memory-grid" id="memoryGrid"></div>
  <button id="backToMenuMem" onclick="backToMenu()">Volver al men√∫</button>
</div>

<div id="mazeGame">
  <h2>Juego del Laberinto</h2>
  <div id="maze"></div>
  <p>Usa las flechas del teclado para mover el jugador verde hasta el cuadro dorado.</p>
  <button id="backToMenuMaze" onclick="backToMenu()">Volver al men√∫</button>
</div>

<script>
// Mostrar el juego seleccionado
function showGame(game) {
  document.getElementById('menu').style.display = 'none';
  if (game === 'memory') {
    document.getElementById('memoryGame').style.display = 'block';
    initMemoryGame();
  } else if (game === 'maze') {
    document.getElementById('mazeGame').style.display = 'block';
    initMazeGame();
  }
}

function backToMenu() {
  document.getElementById('memoryGame').style.display = 'none';
  document.getElementById('mazeGame').style.display = 'none';
  document.getElementById('menu').style.display = 'block';
  resetMemoryGame();
  resetMazeGame();
}

/* ------------ Juego de Memoria ------------ */

const memoryGrid = document.getElementById('memoryGrid');
const symbols = ['üçé', 'üçå', 'üçá', 'üçâ', 'üçì', 'üçí', 'ü•ù', 'üçç']; // 8 pares
let cards = [];
let flippedCards = [];
let matchedPairs = 0;
let lockBoard = false;

function initMemoryGame() {
  if (cards.length > 0) return; // Evita reinicializar al volver al juego
  const doubleSymbols = symbols.concat(symbols);
  const shuffled = doubleSymbols.sort(() => Math.random() - 0.5);
  memoryGrid.innerHTML = '';

  cards = shuffled.map((symbol, index) => {
    const card = document.createElement('div');
    card.classList.add('card');
    card.dataset.symbol = symbol;

    const cardInner = document.createElement('div');
    cardInner.classList.add('card-inner');

    const cardFront = document.createElement('div');
    cardFront.classList.add('card-front');

    const cardBack = document.createElement('div');
    cardBack.classList.add('card-back');
    cardBack.textContent = symbol;

    cardInner.appendChild(cardFront);
    cardInner.appendChild(cardBack);
    card.appendChild(cardInner);

    card.addEventListener('click', () => flipCard(card));
    memoryGrid.appendChild(card);
    return card;
  });

  flippedCards = [];
  matchedPairs = 0;
  lockBoard = false;
}

function flipCard(card) {
  if (lockBoard) return;
  if (flippedCards.includes(card)) return;

  card.classList.add('flipped');
  flippedCards.push(card);

  if (flippedCards.length === 2) {
    checkForMatch();
  }
}

function checkForMatch() {
  lockBoard = true;
  const [card1, card2] = flippedCards;
  const isMatch = card1.dataset.symbol === card2.dataset.symbol;
  if (isMatch) {
    matchedPairs++;
    flippedCards = [];
    lockBoard = false;
    if (matchedPairs === symbols.length) {
      setTimeout(() => alert('¬°Felicidades! Completaste el juego de memoria.'), 300);
    }
  } else {
    setTimeout(() => {
      card1.classList.remove('flipped');
      card2.classList.remove('flipped');
      flippedCards = [];
      lockBoard = false;
    }, 1000);
  }
}

function resetMemoryGame() {
  cards = [];
  flippedCards = [];
  matchedPairs = 0;
  lockBoard = false;
  memoryGrid.innerHTML = '';
}

/* ------------ Juego del Laberinto ------------ */

const maze = document.getElementById('maze');
const mazeSize = 10;
let mazeGrid = [];
let playerPos = {x: 1, y: 1};
const goalPos = {x: 8, y: 8};
let mazeInitialized = false;

const mazeLayout = [
  [1,1,1,1,1,1,1,1,1,1],
  [1,0,0,0,1,0,0,0,0,1],
  [1,0,1,0,1,0,1,1,0,1],
  [1,0,1,0,0,0,0,1,0,1],
  [1,0,1,1,1,1,0,1,0,1],
  [1,0,0,0,0,1,0,1,0,1],
  [1,1,1,1,0,1,0,1,0,1],
  [1,0,0,1,0,0,0,0,0,1],
  [1,0,0,0,1,1,1,1,0,1],
  [1,1,1,1,1,1,1,1,1,1],
];

function initMazeGame() {
  if (mazeInitialized) return;
  maze.innerHTML = '';
  mazeGrid = [];

  for(let y=0; y<mazeSize; y++) {
    for(let x=0; x<mazeSize; x++) {
      const cell = document.createElement('div');
      cell.classList.add('maze-cell');
      if(mazeLayout[y][x] === 1) cell.classList.add('wall');
      if(x === playerPos.x && y === playerPos.y) cell.classList.add('player');
      if(x === goalPos.x && y === goalPos.y) cell.classList.add('goal');
      maze.appendChild(cell);
      mazeGrid.push(cell);
    }
  }
  window.addEventListener('keydown', movePlayer);
  mazeInitialized = true;
}

function movePlayer(e) {
  let newX = playerPos.x;
  let newY = playerPos.y;

  if(e.key === 'ArrowUp') newY--;
  else if(e.key === 'ArrowDown') newY++;
  else if(e.key === 'ArrowLeft') newX--;
  else if(e.key === 'ArrowRight') newX++;
  else return;

  if (!isWalkable(newX, newY)) return;

  updatePlayerPosition(newX, newY);

  if(newX === goalPos.x && newY === goalPos.y) {
    setTimeout(() => alert('¬°Ganaste el laberinto!'), 100);
  }
}

function isWalkable(x,y) {
  if(x < 0 || y < 0 || x >= mazeSize || y >= mazeSize) return false;
  return mazeLayout[y][x] === 0;
}

function updatePlayerPosition(newX, newY) {
  const oldCellIndex = playerPos.y * mazeSize + playerPos.x;
  const newCellIndex = newY * mazeSize + newX;

  mazeGrid[oldCellIndex].classList.remove('player');
  playerPos.x = newX;
  playerPos.y = newY;
  mazeGrid[newCellIndex].classList.add('player');
}

function resetMazeGame() {
  window.removeEventListener('keydown', movePlayer);
  maze.innerHTML = '';
  playerPos = {x: 1, y: 1};
  mazeInitialized = false;
}

</script>

</body>
</html>
