<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Juego Laberinto Mundo Sin Límites</title>
<style>
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #000;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    height: 100vh;
    user-select: none;
  }
  h1 {
    margin: 20px 0;
    text-shadow: 0 0 5px #0ff;
  }
  #maze {
    display: grid;
    grid-template-columns: repeat(19, 30px);
    grid-template-rows: repeat(21, 30px);
    gap: 2px;
    background-color: #222;
    border: 3px solid #0ff;
    box-shadow: 0 0 12px #0ffaaaff;
  }
  .cell {
    width: 30px;
    height: 30px;
    box-sizing: border-box;
  }
  .wall {
    background-color: #00008b;
    box-shadow: inset 0 0 5px #0000ff;
  }
  .path {
    background-color: #111;
  }
  .player {
    background-color: #ffeb3b;
    border-radius: 50%;
    box-shadow: 0 0 15px 3px #ffeb3b, inset 0 0 10px 3px #fff176;
    position: relative;
    z-index: 1;
  }
  .goal {
    background-color: #f44336;
    border-radius: 50%;
    box-shadow: 0 0 20px 4px #f4433611, inset 0 0 10px 3px #ff7961;
  }
  #info {
    margin: 15px;
    font-size: 18px;
    text-shadow: 0 0 5px #0ff;
  }
</style>
</head>
<body>

<h1>Laberinto Mundo Sin Límites - Estilo Pac-Man</h1>
<div id="maze"></div>
<div id="info">Movimientos: <span id="moves">0</span></div>

<script>
const mazeElement = document.getElementById('maze');
const movesCounter = document.getElementById('moves');

// Mapa basado en Pac-Man clásico 19x21
// 1 = pared, 0 = camino, 2 = jugador, 3 = meta
const mazeMap = [
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
  [1,2,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,3,1],
  [1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1],
  [1,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,1],
  [1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1],
  [1,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,1],
  [1,1,1,0,1,1,1,0,1,0,1,0,1,1,1,0,1,1,1],
  [0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],
  [1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1],
  [1,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,1],
  [1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1],
  [1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],
  [1,1,1,1,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1],
  [1,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,1],
  [1,0,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,0,1],
  [1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1],
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
];

const rows = mazeMap.length;
const cols = mazeMap[0].length;

let playerPosition = { x: 0, y: 0 };
let moves = 0;

function createMaze() {
  mazeElement.style.gridTemplateColumns = `repeat(${cols}, 30px)`;
  mazeElement.style.gridTemplateRows = `repeat(${rows}, 30px)`;
  mazeElement.innerHTML = '';
  for (let y = 0; y < rows; y++) {
    for (let x = 0; x < cols; x++) {
      const cell = document.createElement('div');
      cell.classList.add('cell');

      switch (mazeMap[y][x]) {
        case 1:
          cell.classList.add('wall');
          break;
        case 0:
        case 2:
          cell.classList.add('path');
          break;
        case 3:
          cell.classList.add('goal');
          break;
      }

      cell.id = `cell-${x}-${y}`;
      mazeElement.appendChild(cell);

      if (mazeMap[y][x] === 2) {
        playerPosition = { x, y };
        cell.classList.add('player');
      }
    }
  }
}

function updatePlayerPosition(newX, newY) {
  document.getElementById(`cell-${playerPosition.x}-${playerPosition.y}`).classList.remove('player');
  playerPosition.x = newX;
  playerPosition.y = newY;
  document.getElementById(`cell-${newX}-${newY}`).classList.add('player');
}

function move(dx, dy) {
  let newX = (playerPosition.x + dx + cols) % cols;
  let newY = (playerPosition.y + dy + rows) % rows;

  // No se puede pasar por muros
  if (mazeMap[newY][newX] === 1) return;

  updatePlayerPosition(newX, newY);
  moves++;
  movesCounter.textContent = moves;

  checkGoal();
}

function checkGoal() {
  if (mazeMap[playerPosition.y][playerPosition.x] === 3) {
    alert(`¡Felicidades! Ganaste en ${moves} movimientos.`);
    resetGame();
  }
}

function resetGame() {
  moves = 0;
  movesCounter.textContent = moves;
  createMaze();
}

window.addEventListener('keydown', e => {
  switch(e.key) {
    case 'ArrowUp': e.preventDefault(); move(0, -1); break;
    case 'ArrowDown': e.preventDefault(); move(0, 1); break;
    case 'ArrowLeft': e.preventDefault(); move(-1, 0); break;
    case 'ArrowRight': e.preventDefault(); move(1, 0); break;
  }
});

createMaze();

</script>

</body>
</html>
